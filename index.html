<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seedling | The Artisan's Journey</title>
    <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville&family=Caveat&display=swap" rel="stylesheet">
    <style>
        /* CSS Root: The Earthy Palette from Your Inspiration */
        :root {
            --egyptian-earth: #BB6830;
            --emerald-green: #284139;
            --wasabi: #809076;
            --creased-khaki: #F8F794; /* Your chosen parchment base */
            --noir-de-vigne: #111A19;
            --gold-frame: #D4AF37;
            --parchment-text: #fffef0;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--creased-khaki);
            color: var(--noir-de-vigne);
            font-family: 'Libre Baskerville', serif;
            overflow: hidden; /* Lock scroll for modal transitions */
        }

        /* 1. GERMINATION PHASE: The 3D 2-Step Onboarding */
        .germination-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--emerald-green);
            background-image: url('https://www.transparenttextures.com/patterns/dark-wood.png'); /* 3D Depth Texture */
            display: flex; align-items: center; justify-content: center;
            z-index: 5000;
            transition: opacity 1s, visibility 1s;
        }
        
        body.onboarding-complete .germination-overlay { opacity: 0; visibility: hidden; }

        .ornate-3d-frame {
            border: 20px solid var(--gold-frame);
            /* This is a 3D effect border image, simulating a carved frame */
            border-image: url('https://i.imgur.com/3VzM2s0.png') 40 stretch; 
            background-color: #fdfaf0;
            padding: 40px;
            border-radius: 10px;
            max-width: 550px;
            width: 90%;
            text-align: center;
            box-shadow: 20px 20px 60px rgba(0,0,0,0.5), inset 10px 10px 30px rgba(0,0,0,0.1); /* Deep 3D Shadow */
            position: relative;
        }

        . vintage-title {
            font-size: 2.2rem;
            color: var(--egyptian-earth);
            font-weight: normal;
            margin-bottom: 30px;
        }

        .role-picker {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .vintage-btn {
            padding: 15px;
            background: none;
            border: 2px solid var(--wasabi);
            color: var(--emerald-green);
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
            position: relative;
        }

        .vintage-btn:hover {
            border-color: var(--egyptian-earth);
            background-color: #f8fcf9;
            transform: translateY(-2px);
        }

        /* 2. THE MAIN FIELD JOURNAL (App Shell) */
        .app-shell {
            display: none;
            height: 100vh;
        }
        body.onboarding-complete .app-shell { display: flex; }

        /* Left Navigation Column: Based on "Artisan" Image */
        .nav-column {
            width: 110px;
            background-color: var(--emerald-green);
            background-image: url('https://www.transparenttextures.com/patterns/pinstripe-dark.png');
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 30px;
            color: var(--creased-khaki);
            z-index: 10;
            box-shadow: 5px 0 15px rgba(0,0,0,0.2);
        }

        .site-seal {
            font-size: 2.5rem;
            color: var(--wasabi);
            font-weight: bold;
            margin-bottom: 40px;
            font-family: 'Libre Baskerville', serif;
        }

        .nav-item {
            background: none;
            border: none;
            font-size: 2rem;
            color: var(--creased-khaki);
            margin: 25px 0;
            cursor: pointer;
            opacity: 0.5;
            transition: 0.3s;
        }
        
        .nav-item:hover, .nav-item.active {
            opacity: 1;
            filter: drop-shadow(0 0 5px var(--wasabi));
            transform: scale(1.1);
        }

        .rank-seal {
            margin-top: auto;
            margin-bottom: 20px;
            padding: 10px 15px;
            background-color: var(--wasabi);
            color: white;
            border-radius: 5px;
            font-size: 0.8rem;
            text-align: center;
        }

        /* 3. THE MAIN CANVAS (Page Swapping) */
        .main-canvas {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
            background-image: url('https://www.transparenttextures.com/patterns/paper.png'); /* Main Canvas Texture */
        }
        .page { display: none; animation: fadeIn 0.5s; }
        .page.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* THE 3D PICTURE FRAME LAYOUT (Lessons) */
        .journey-frame-layout {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 40px;
        }

        .ornate-text-frame {
            border: 15px solid var(--gold-frame);
            border-image: url('https://i.imgur.com/Y4Y6L2W.png') 30 stretch;
            background-color: #fffef0;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 10px 10px 30px rgba(0,0,0,0.2);
            position: relative;
        }
        
        .ornate-text-frame h2 {
            font-family: 'Libre Baskerville', serif;
            color: var(--egyptian-earth);
            font-size: 2rem;
            margin-bottom: 20px;
        }
        
        .parchment-summary {
            font-family: 'Libre Baskerville', serif;
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--noir-de-vigne);
        }

        .continue-btn {
            position: absolute; bottom: 20px; right: 20px;
            background-color: var(--wasabi); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; display: none;
        }

        .field-tools {
            display: flex; flex-direction: column; gap: 20px;
        }
        .tool-box { background: white; border-radius: 10px; padding: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        textarea { width: 100%; height: 150px; border: 1px solid #eee; font-family: 'Caveat', cursive; font-size: 1.2rem; }

        /* THE DOODLE KANBAN (Tracking Process) */
        .doodle-board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 30px;
        }
        .doodle-col {
            border: 3px dashed var(--wasabi);
            background-color: #fcfcfc;
            border-radius: 20px;
            min-height: 500px;
            padding: 20px;
            text-align: center;
        }
        .doodle-col h3 { font-family: 'Caveat', cursive; color: var(--emerald-green); font-size: 1.8rem; }
        
        /* The Kanban Process Cards: Hand-drawn Sticky Notes */
        .doodle-card {
            background-color: #ffeb3b; /* Classic Sticky Yellow */
            padding: 20px;
            margin: 15px 0;
            border-radius: 5px;
            transform: rotate(-2deg);
            box-shadow: 5px 5px 10px rgba(0,0,0,0.15);
            cursor: grab;
            font-family: 'Caveat', cursive;
            font-size: 1.2rem;
            color: #333;
            transition: 0.3s;
        }
        .doodle-card:nth-child(even) { transform: rotate(2deg); background-color: #b3e5fc; /* Blue Sticky */ }
        .doodle-card:hover { transform: scale(1.05); }

    </style>
</head>
<body class="parchment">

    <div id="onboarding-overlay" class="germination-overlay">
        
        <div id="step-1" class="ornate-3d-frame">
            <h1 class="vintage-title">Welcome, Artisan</h1>
            <p>Your journey with multiple intricate subjects begins here. It is a shared path, but your unique approach is critical.</p>
            <p><strong>To begin, who are you planting as today?</strong></p>
            <div class="role-picker">
                <button onclick="nextStepOnboarding('Independent')" class="vintage-btn">Independent Learner</button>
                <button onclick="nextStepOnboarding('Student')" class="vintage-btn">K-12 Student</button>
                <button onclick="nextStepOnboarding('Teacher')" class="vintage-btn">Teacher / Mentor</button>
                <button onclick="nextStepOnboarding('Parent')" class="vintage-btn">Parent / Supporter</button>
            </div>
        </div>

        <div id="step-2" class="ornate-3d-frame" style="display:none;">
            <h2 class="vintage-title">Nurture Your Seedling</h2>
            <p>Like a growing seed, your mind absorbs focus differently.</p>
            <p>Let Pip know how to provide the perfect sunlight for your journey.</p>
            <form id="seedling-calibration">
                <div class="quiz-q">
                    <p><strong>Your Focus Sprint Level:</strong></p>
                    <label><input type="radio" name="focus" value="15" checked> 15m (Short Sprints)</label>
                    <label><input type="radio" name="focus" value="30"> 30m (Steady Growth)</label>
                    <label><input type="radio" name="focus" value="60"> 60m (Deep Nurture)</label>
                </div>
                <button type="button" onclick="germinate()" class="btn-confirm-germinate vintage-btn">Plant and Enter the Garden</button>
            </form>
        </div>
    </div>

    <div class="app-shell" id="app-shell">
        
        <aside class="nav-column">
            <div class="site-seal">S</div>
            <nav>
                <button class="nav-item active" onclick="showPage('lesson-page')">üìñ</button> <button class="nav-item" onclick="showPage('kanban-page')">üè°</button> <button class="nav-item" onclick="showPage('grove-page')">ü™™</button> </nav>
            <div class="rank-seal" id="rank-badge">üå± Novice</div>
        </aside>

        <main class="main-canvas" id="main-canvas">
            
            <section id="lesson-page" class="page active">
                <div class="journey-frame-layout">
                    
                    <div class="ornate-text-frame">
                        <h2 id="current-lesson-topic">Choose Your Subject Seed</h2>
                        <div id="lesson-content-summary" class="parchment-summary">
                            <p>Before you begin the core lesson, absorb this introduction. It is the soil of your understanding.</p>
                        </div>
                        <button id="lesson-continue-btn" class="continue-btn vintage-btn" onclick="continueJourney()">Nurture Topic</button>
                    </div>

                    <aside class="field-tools">
                        <div class="tool-box"><h4>Field Notes</h4><textarea id="field-notes" placeholder="Jot down a conceptual thought..."></textarea></div>
                        <div class="tool-box"><h4>AI Assistant</h4><div id="ai-chat"></div></div>
                    </aside>
                </div>
            </section>

            <section id="kanban-page" class="page">
                <h2>The Drawing Board (Kanban Garden)</h2>
                <div class="kanban-entry">
                    <input type="text" id="subject-seed-input" placeholder="Type a new subject...">
                    <button onclick="plantNewSeed()">Plant subject seed</button>
                </div>
                <div class="doodle-board">
                    <div class="doodle-col" id="kanban-todo"><h3>The Packet</h3><div class="drop-zone"></div></div>
                    <div class="doodle-col" id="kanban-doing"><h3>Sprouting</h3><div class="drop-zone"></div></div>
                    <div class="doodle-col" id="kanban-done"><h3>Blooming</h3><div class="drop-zone"></div></div>
                </div>
            </section>

        </main>
    </div>

    <script src="script.js"></script>
</body>
<button class="nav-item" onclick="returnToRoots()" title="Recalibrate Journey">
    üîÑ <span style="font-size: 0.5rem; display: block;">Reset</span>
</button>
</html>
