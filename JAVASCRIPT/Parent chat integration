function calibrateSystem() {
    const role = document.getElementById('role-selector').value;
    
    // Previous calibration logic...
    
    // Parent Role Handling
    const parentDash = document.getElementById('parent-portal');
    if (role === 'parent') {
        parentDash.style.display = 'block';
        alert("Parent Mode: You can now monitor progress and send words of encouragement.");
    }
}

function sendChatMessage() {
    const input = document.getElementById('group-chat-input');
    const chatBox = document.getElementById('group-chat-box');
    const role = JSON.parse(localStorage.getItem('nexusProfile')).role;
    
    if (input.value.trim() === "") return;

    const msg = document.createElement('p');
    msg.className = `msg ${role}`;
    msg.innerHTML = `<strong>${role.charAt(0).toUpperCase() + role.slice(1)}:</strong> ${input.value}`;
    
    chatBox.appendChild(msg);
    input.value = '';
    chatBox.scrollTop = chatBox.scrollHeight;
}
